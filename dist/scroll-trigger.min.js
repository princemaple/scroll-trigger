angular.module("scroll-trigger",[]).constant("scrollTriggerDefaultOptions",{offset:0,interval:120}).factory("ScrollContainer",["$window",function(r){return{globalContainer:r}}]).directive("scrollContainer",["ScrollContainer","ScrollTrigger",function(r,n){return{scope:!1,link:function(e,t,o){"global"==o.scrollContainer&&(angular.element(r.globalContainer).off("scroll"),r.globalContainer=t[0],t.on("scroll",n.listener))}}}]).provider("ScrollTrigger",["scrollTriggerDefaultOptions",function(r){var n=angular.copy(r);this.offset=function(r){return angular.isUndefined(r)?n.offset:void(angular.isNumber(r)&&(n.offset=r))},this.interval=function(r){return angular.isUndefined(r)?n.interval:void(angular.isNumber(r)&&r>0&&(n.interval=r))},this.$get=["$window","ScrollContainer","offsetFn","thresholdFn","throttleFn",function(r,e,t,o,i){var l={buffer:{},scrollTriggerIdCounter:0,listen:function(r){r.isContainer&&angular.element(r.elem).on("scroll",this.listener)},needAction:function(r,e){var o,i=r.elem;return r.isContainer&&r.toEnd?e+n.offset>=i.scrollHeight:(o=t(r.elem).top,r.toEnd&&(o+=i.offsetHeight),o<=e+n.offset)},update:function(r){r&&r.stopPropagation();var n=o(r.currentTarget);angular.forEach(l.buffer,function(e,t,o){e.busy()||l.needAction(e,n,r)&&(e.action(),e.persist||delete o[t])})},register:function(r){var n=r.id||++l.scrollTriggerIdCounter,e=o(),i=t(r.elem).top;(r.busy()||!(r.run||!r.isContainer&&(r.end&&i+elem.offsetHeight<e||!r.end&&e>i))||(r.action(),r.run&&r.persist))&&(this.buffer[n]=r,this.listen(r))}};return l.listener=i(l.update,n.interval),angular.element(e.globalContainer).on("scroll",l.listener),l}]}]).directive("scrollTrigger",["$parse","ScrollTrigger",function(r,n){return{priority:1,restrict:"A",scope:!1,link:function(e,t,o){n.register({id:o.scrollTriggerId,elem:t[0],toEnd:"triggerAtEnd"in o,persist:"triggerPersist"in o,isContainer:"scrollContainer"in o,run:"triggerRun"in o,action:function(){return e.$apply(function(){return r(o.scrollTrigger)(e,{$params:{$elem:t,$attrs:o}})})},busy:o.triggerActive?function(){return!r(o.triggerActive)(e)}:function(){return!1}})}}}]),angular.module("scroll-trigger").factory("offsetFn",["$window",function(r){return function(r){var n=0,e=0;do n+=r.offsetTop||0,e+=r.offsetLeft||0,r=r.offsetParent;while(r);return{top:n,left:e}}}]),angular.module("scroll-trigger").factory("thresholdFn",["$window",function(r){return function(n){return n=n||r,n==r?n.pageYOffset+n.innerHeight:n.scrollTop+n.clientHeight}}]),angular.module("scroll-trigger").factory("throttleFn",["$timeout",function(r){return function(n,e){var t,o=0;return function(){var i=arguments,l=this,a=+new Date,s=function(){o=a,n.apply(l,i)};r.cancel(t),a>=o+e?s():t=r(s,e,!1)}}}]);