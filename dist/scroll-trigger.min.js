angular.module("scroll-trigger",[]).constant("scrollTriggerDefaultOptions",{offset:0,interval:120}).factory("ScrollContainer",["$window",function(r){return{globalContainer:r}}]).directive("scrollContainer",["ScrollContainer","ScrollTrigger",function(r,n){return{scope:!1,link:function(e,t,i){"global"==i.scrollContainer&&(angular.element(r.globalContainer).off("scroll"),r.globalContainer=t[0],t.on("scroll",n.listener))}}}]).provider("ScrollTrigger",["scrollTriggerDefaultOptions",function(r){var n=angular.copy(r);this.offset=function(r){return angular.isUndefined(r)?n.offset:void(angular.isNumber(r)&&(n.offset=r))},this.interval=function(r){return angular.isUndefined(r)?n.interval:void(angular.isNumber(r)&&r>0&&(n.interval=r))},this.$get=["$window","ScrollContainer","offsetFn","thresholdFn","throttleFn",function(r,e,t,i,o){var l={buffer:{},scrollTriggerIdCounter:0,listen:function(r){r.isContainer&&angular.element(r.elem).on("scroll",this.listener)},needAction:function(r,e){var i,o=r.elem;return r.isContainer&&r.toEnd?e+n.offset>=o.scrollHeight:(i=t(r.elem).top,r.toEnd&&(i+=o.offsetHeight),i<=e+n.offset)},update:function(r){r&&r.stopPropagation();var n=i(r.currentTarget);angular.forEach(l.buffer,function(e,t,i){e.busy()||l.needAction(e,n,r)&&(e.action(),e.persist||delete i[t])})},register:function(r){var n=r.id||++l.scrollTriggerIdCounter,e=i(),o=t(r.elem).top;(!(r.run||!r.isContainer&&(r.end&&o+elem.offsetHeight<e||!r.end&&e>o))||(r.action(),r.run&&r.persist))&&(this.buffer[n]=r,this.listen(r))}};return l.listener=o(l.update,n.interval),angular.element(e.globalContainer).on("scroll",l.listener),l}]}]).directive("scrollTrigger",["$parse","ScrollTrigger",function(r,n){return{priority:1,restrict:"A",scope:!1,link:function(e,t,i){n.register({id:i.scrollTriggerId,elem:t[0],toEnd:"triggerAtEnd"in i,persist:"triggerPersist"in i,isContainer:"triggerContainer"in i,run:"triggerRun"in i,action:function(){return r(i.scrollTrigger)(e,{$params:{$elem:t,$attrs:i}})},busy:i.triggerActive?function(){return!r(i.triggerActive)(e)}:function(){return!1}})}}}]),angular.module("scroll-trigger").factory("offsetFn",["$window",function(r){return function(r){var n=0,e=0;do n+=r.offsetTop||0,e+=r.offsetLeft||0,r=r.offsetParent;while(r);return{top:n,left:e}}}]),angular.module("scroll-trigger").factory("thresholdFn",["$window",function(r){return function(n){return n=n||r,n==r?n.pageYOffset+n.innerHeight:n.scrollTop+n.clientHeight}}]),angular.module("scroll-trigger").factory("throttleFn",["$timeout",function(r){return function(n,e){var t,i=0;return function(){var o=arguments,l=this,a=+new Date,s=function(){i=a,n.apply(l,o)};r.cancel(t),a>=i+e?s():t=r(s,e,!1)}}}]);